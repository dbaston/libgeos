//
// Test Suite for C-API GEOSBuffer and GEOSBufferWithStyle

#include <tut/tut.hpp>
// geos
#include <geos_c.h>
// std
#include <cstdarg>
#include <cstdio>
#include <cstdlib>
#include <cstring>

#include "capi_test_utils.h"

namespace tut {
//
// Test Group
//

// Common data used in test cases.
struct test_capigeosbuffer_data : public capitest::utility {
    GEOSBufferParams* bp_;
    double area_;

    test_capigeosbuffer_data()
        : bp_(nullptr)
    {
        GEOSWKTWriter_setTrim(wktw_, 1);
    }

    ~test_capigeosbuffer_data()
    {
        GEOSBufferParams_destroy(bp_);
    }

};

typedef test_group<test_capigeosbuffer_data> group;
typedef group::object object;

group test_capigeosbuffer_group("capi::GEOSBuffer");

//
// Test Cases
//


// Buffer against empty point
template<>
template<>
void object::test<1>
()
{
    geom1_ = GEOSGeomFromWKT("POINT EMPTY");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 1, 8,
                                 GEOSBUF_CAP_ROUND,
                                 GEOSBUF_JOIN_BEVEL,
                                 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(std::string(wkt_), std::string("POLYGON EMPTY"));
}

// Buffer against empty linestring
template<>
template<>
void object::test<2>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING EMPTY");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 1, 8,
                                 GEOSBUF_CAP_ROUND,
                                 GEOSBUF_JOIN_BEVEL,
                                 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(std::string(wkt_), std::string("POLYGON EMPTY"));
}

// Buffer against empty polygon
template<>
template<>
void object::test<3>
()
{
    geom1_ = GEOSGeomFromWKT("POLYGON EMPTY");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 1, 8,
                                 GEOSBUF_CAP_ROUND,
                                 GEOSBUF_JOIN_BEVEL,
                                 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(std::string(wkt_), std::string("POLYGON EMPTY"));
}

// Simple Buffer on a 2-vertices line (quadSegs: 1)
template<>
template<>
void object::test<4>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBuffer(geom1_, 5, 1);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 7);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 161.803, 0.001);

}

// Simple Buffer on a 2-vertices line (quadSegs: 2)
template<>
template<>
void object::test<5>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBuffer(geom1_, 5, 2);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 11);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 182.514, 0.001);
}

// Buffer with square end caps on a 2-vertices line (no matter quadSegs)
template<>
template<>
void object::test<6>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_SQUARE,
                                 GEOSBUF_JOIN_ROUND, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 7);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 211.803, 0.001);

}

// Buffer with flat end caps on a 2-vertices line (no matter quadSegs)
template<>
template<>
void object::test<7>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_FLAT,
                                 GEOSBUF_JOIN_ROUND, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 5);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 111.803, 0.001);
}

// Buffer with flat end cap on a 2-vertices horizontal line
template<>
template<>
void object::test<8>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_FLAT,
                                 GEOSBUF_JOIN_ROUND, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 5);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 50.0, 0.001);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((10.0000000000000000 15.0000000000000000, 10.0000000000000000 5.0000000000000000, 5.0000000000000000 5.0000000000000000, 5.0000000000000000 15.0000000000000000, 10.0000000000000000 15.0000000000000000))"
                  ));
}

// Buffer with square end cap on a 2-vertices horizontal line
template<>
template<>
void object::test<9>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_SQUARE,
                                 GEOSBUF_JOIN_ROUND, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 7);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 150.0, 0.001);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((10.0000000000000000 15.0000000000000000, 15.0000000000000000 15.0000000000000000, 15.0000000000000000 5.0000000000000000, 5.0000000000000000 5.0000000000000000, 0.0000000000000000 5.0000000000000009, 0.0000000000000000 15.0000000000000000, 10.0000000000000000 15.0000000000000000))"
                  ));
}

// Buffer with flat end cap and round join style
// on an L-shaped simple line
template<>
template<>
void object::test<10>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_SQUARE,
                                 GEOSBUF_JOIN_ROUND, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 29);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 244.615, 0.001);

}

// Buffer with flat end cap and mitre join style
// on an L-shaped simple line
template<>
template<>
void object::test<11>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_SQUARE,
                                 GEOSBUF_JOIN_MITRE, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 9);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 250.0, 0.001);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((5.0000000000000000 15.0000000000000000, 5.0000000000000000 20.0000000000000000, 5.0000000000000000 25.0000000000000000, 15.0000000000000000 25.0000000000000000, 15.0000000000000000 5.0000000000000000, 5.0000000000000000 5.0000000000000000, 0.0000000000000000 5.0000000000000009, 0.0000000000000000 15.0000000000000000, 5.0000000000000000 15.0000000000000000))"
                  ));
}

// Buffer with flat end cap and bevel join style
// on an L-shaped simple line
template<>
template<>
void object::test<12>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 20, GEOSBUF_CAP_SQUARE,
                                 GEOSBUF_JOIN_BEVEL, 5.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 10);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 237.5, 0.001);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((5.0000000000000000 15.0000000000000000, 5.0000000000000000 20.0000000000000000, 5.0000000000000000 25.0000000000000000, 15.0000000000000000 25.0000000000000000, 15.0000000000000000 10.0000000000000000, 10.0000000000000000 5.0000000000000000, 5.0000000000000000 5.0000000000000000, 0.0000000000000000 5.0000000000000009, 0.0000000000000000 15.0000000000000000, 5.0000000000000000 15.0000000000000000))"
                  ));
}

// Buffer with flat end cap and bevel join style
// on an L-shaped simple line with different quadSegs and mitreLimit
// (result unaffected)
template<>
template<>
void object::test<13>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10, 10 20)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 5, 200, GEOSBUF_CAP_SQUARE,
                                 GEOSBUF_JOIN_BEVEL, 10.0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 10);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 237.5, 0.001);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((5.0000000000000000 15.0000000000000000, 5.0000000000000000 20.0000000000000000, 5.0000000000000000 25.0000000000000000, 15.0000000000000000 25.0000000000000000, 15.0000000000000000 10.0000000000000000, 10.0000000000000000 5.0000000000000000, 5.0000000000000000 5.0000000000000000, 0.0000000000000000 5.0000000000000009, 0.0000000000000000 15.0000000000000000, 5.0000000000000000 15.0000000000000000))"
                  ));
}

// Buffer with limited mitre  (1)
template<>
template<>
void object::test<14>
()
{
    geom1_ = GEOSGeomFromWKT("POLYGON((0 0, 10 0, 10 10, 0 0))");
    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 2, 200, GEOSBUF_CAP_FLAT,
                                 GEOSBUF_JOIN_MITRE, 1);
    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 7);
    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 132.289, 0.001);
}

// Buffer with limited mitre  (2)
template<>
template<>
void object::test<15>
()
{
    geom1_ = GEOSGeomFromWKT("POLYGON((0 0, 10 0, 10 10, 0 0))");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 2, 200, GEOSBUF_CAP_FLAT,
                                 GEOSBUF_JOIN_MITRE, 2);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 6);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 140.352, 0.001);

}

// Buffer with limited mitre  (3)
template<>
template<>
void object::test<16>
()
{
    geom1_ = GEOSGeomFromWKT("POLYGON((0 0, 10 0, 10 10, 0 0))");

    ensure(nullptr != geom1_);

    geom2_ = GEOSBufferWithStyle(geom1_, 2, 200, GEOSBUF_CAP_FLAT,
                                 GEOSBUF_JOIN_MITRE, 3);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(GEOSGetNumCoordinates(geom2_), 4);

    ensure(0 != GEOSArea(geom2_, &area_));
    ensure_area(area_, 141.598, 0.001);

}

// Buffer with params:
// flat end cap on a straight line
template<>
template<>
void object::test<17>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10)");

    ensure(nullptr != geom1_);

    bp_ = GEOSBufferParams_create();

    GEOSBufferParams_setEndCapStyle(bp_, GEOSBUF_CAP_SQUARE);
    geom2_ = GEOSBufferWithParams(geom1_, bp_, 2);

    ensure(nullptr != geom2_);

    wkt_ = GEOSWKTWriter_write(wktw_, geom2_);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((10 12, 12 12, 12 8, 5 8, 3 8, 3 12, 10 12))"
                  ));
}

// Buffer with params:
// flat end cap on a straight line
// Single sided (left)
template<>
template<>
void object::test<18>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10)");

    ensure(nullptr != geom1_);

    bp_ = GEOSBufferParams_create();

    GEOSBufferParams_setEndCapStyle(bp_, GEOSBUF_CAP_SQUARE);
    GEOSBufferParams_setSingleSided(bp_, 1);
    geom2_ = GEOSBufferWithParams(geom1_, bp_, 2);

    ensure(nullptr != geom2_);

    wkt_ = GEOSWKTWriter_write(wktw_, geom2_);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((10 10, 5 10, 5 12, 10 12, 10 10))"
                  ));
}

// Buffer with params:
// flat end cap on a straight line
// Single sided (right)
template<>
template<>
void object::test<19>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(5 10, 10 10)");

    ensure(nullptr != geom1_);

    bp_ = GEOSBufferParams_create();

    GEOSBufferParams_setEndCapStyle(bp_, GEOSBUF_CAP_SQUARE);
    GEOSBufferParams_setSingleSided(bp_, 1);
    geom2_ = GEOSBufferWithParams(geom1_, bp_, -2);

    ensure(nullptr != geom2_);

    wkt_ = GEOSWKTWriter_write(wktw_, geom2_);

    ensure_equals(std::string(wkt_), std::string(
                      "POLYGON ((5 10, 10 10, 10 8, 5 8, 5 10))"
                  ));
}

// Single-sided buffer  (3)
// http://trac.osgeo.org/geos/ticket/455
template<>
template<>
void object::test<20>
()
{
    geom1_ = GEOSGeomFromWKT("LINESTRING(0 0, 10 0, 10 10)', -10)");

    ensure(nullptr != geom1_);

    geom2_ = GEOSSingleSidedBuffer(geom1_, 10, 8, GEOSBUF_JOIN_BEVEL, 0, 0);

    ensure(nullptr != geom2_);

    wkt_ = GEOSGeomToWKT(geom2_);

    ensure_equals(std::string(wkt_), std::string(
                      "LINESTRING (20.0000000000000000 10.0000000000000000, 20.0000000000000000 0.0000000000000000, 10.0000000000000000 -10.0000000000000000, 0.0000000000000000 -10.0000000000000000)"
                  ));

}

template<>
template<>
void object::test<26>()
{
    std::string wkb("010300000001000000690100006891ED7C3F35BEBFE5D022DBF97EEABF6891ED7C3F35BEBF105839B4C876EABF6891ED7C3F35BEBF598638D6C56DEABF7958A835CD3BBEBF840D4FAF9465EABF7958A835CD3BBEBFCD3B4ED1915CEABF8A1F63EE5A42BEBFF8C264AA6054EABF9BE61DA7E848BEBF41F163CC5D4BEABFACADD85F764FBEBF6C787AA52C43EABFCD3B4ED1915CBEBFB5A679C7293AEABFDE02098A1F63BEBFE02D90A0F831EABF00917EFB3A70BEBF0BB5A679C729EABF211FF46C567DBEBF363CBD529621EABF43AD69DE718ABEBF7F6ABC749318EABF643BDF4F8D97BEBFAAF1D24D6210EABF97900F7A36ABBEBFD578E9263108EABFB81E85EB51B8BEBF000000000000EABFEB73B515FBCBBEBF2B8716D9CEF7E9BF1DC9E53FA4DFBEBF560E2DB29DEFE9BF4F1E166A4DF3BEBF8195438B6CE7E9BF933A014D840DBFBFAC1C5A643BDFE9BFC58F31772D21BFBFD7A3703D0AD7E9BF08AC1C5A643BBFBF022B8716D9CEE9BF4BC8073D9B55BFBF2DB29DEFA7C6E9BF8FE4F21FD26FBFBF3A92CB7F48BFE9BFD200DE02098ABFBF6519E25817B7E9BF151DC9E53FA4BFBF90A0F831E6AEE9BF69006F8104C5BFBF9D8026C286A7E9BFAC1C5A643BDFBFBFAA60545227A0E9BF000000000000C0BFD5E76A2BF697E9BFAAF1D24D6210C0BFE3C798BB9690E9BF54E3A59BC420C0BFF0A7C64B3789E9BF8638D6C56D34C0BFFD87F4DBD781E9BF302AA913D044C0BF0A68226C787AE9BF637FD93D7958C0BF174850FC1873E9BF95D40968226CC0BF24287E8CB96BE9BFC7293A92CB7FC0BF1361C3D32B65E9BFFA7E6ABC7493C0BF2041F163CC5DE9BF2CD49AE61DA7C0BF107A36AB3E57E9BF5F29CB10C7BAC0BFFFB27BF2B050E9BF19E25817B7D1C0BF0C93A9825149E9BF4C37894160E5C0BFFBCBEEC9C342E9BF07F0164850FCC0BFEA043411363CE9BFC1A8A44E4013C1BFBC96900F7A36E9BF7C613255302AC1BFABCFD556EC2FE9BF371AC05B2041C1BF9A081B9E5E29E9BF7A36AB3E575BC1BF6B9A779CA223E9BF35EF38454772C1BF5BD3BCE3141DE9BF780B24287E8CC1BF2C6519E25817E9BFBB270F0BB5A6C1BFFDF675E09C11E9BF76E09C11A5BDC1BFCE88D2DEE00BE9BFB9FC87F4DBD7C1BFA01A2FDD2406E9BFFC1873D712F2C1BF5305A3923A01E9BFC898BB96900FC2BF2497FF907EFBE8BF0BB5A679C729C2BFD881734694F6E8BF4ED1915CFE43C2BF8B6CE7FBA9F1E8BF1A51DA1B7C61C2BF3F575BB1BFECE8BF5D6DC5FEB27BC2BFF241CF66D5E7E8BF29ED0DBE3099C2BFA52C431CEBE2E8BFF46C567DAEB6C2BF5917B7D100DEE8BFC0EC9E3C2CD4C2BFEE5A423EE8D9E8BF8B6CE7FBA9F1C2BFA245B6F3FDD4E8BF57EC2FBB270FC3BF37894160E5D0E8BF226C787AA52CC3BFCDCCCCCCCCCCE8BF764F1E166A4DC3BF62105839B4C8E8BF42CF66D5E76AC3BFDAACFA5C6DC5E8BF0E4FAF946588C3BF6FF085C954C1E8BF613255302AA9C3BFE78C28ED0DBEE8BFB515FBCBEEC9C3BF5F29CB10C7BAE8BF8195438B6CE7C3BFD6C56D3480B7E8BFD578E9263108C4BF4E62105839B4E8BF295C8FC2F528C4BFC5FEB27BF2B0E8BF7D3F355EBA49C4BF1FF46C567DAEE8BFD122DBF97E6AC4BF97900F7A36ABE8BF25068195438BC4BFF085C954C1A8E8BF79E9263108ACC4BF4A7B832F4CA6E8BFCDCCCCCCCCCCC4BFA4703D0AD7A3E8BF21B0726891EDC4BFE0BE0E9C33A2E8BF75931804560EC5BF39B4C876BE9FE8BFC976BE9F1A2FC5BF75029A081B9EE8BFA5BDC1172653C5BFB1506B9A779CE8BFF9A067B3EA73C5BFED9E3C2CD49AE8BF4D840D4FAF94C5BF29ED0DBE3099E8BFA167B3EA73B5C5BF4694F6065F98E8BF7DAEB6627FD9C5BF82E2C798BB96E8BFD1915CFE43FAC5BFA089B0E1E995E8BFAED85F764F1EC6BFBE30992A1895E8BF02BC0512143FC6BFDCD781734694E8BFDE02098A1F63C6BFDCD781734694E8BF32E6AE25E483C6BFFA7E6ABC7493E8BF0E2DB29DEFA7C6BFFA7E6ABC7493E8BF62105839B4C8C6BFFA7E6ABC7493E8BFB6F3FDD478E9C6BFFA7E6ABC7493E8BF933A014D840DC7BFFA7E6ABC7493E8BFE71DA7E8482EC7BFDCD781734694E8BFC364AA605452C7BFDCD781734694E8BF174850FC1873C7BFBE30992A1895E8BFF38E53742497C7BFA089B0E1E995E8BF4772F90FE9B7C7BF82E2C798BB96E8BF24B9FC87F4DBC7BF4694F6065F98E8BF789CA223B9FCC7BF29ED0DBE3099E8BFCC7F48BF7D1DC8BFED9E3C2CD49AE8BF2063EE5A423EC8BFB1506B9A779CE8BFFCA9F1D24D62C8BF75029A081B9EE8BF508D976E1283C8BF39B4C876BE9FE8BFA4703D0AD7A3C8BFE0BE0E9C33A2E8BFF853E3A59BC4C8BFA4703D0AD7A3E8BF4C37894160E5C8BF4A7B832F4CA6E8BFA01A2FDD2406C9BFF085C954C1A8E8BFF4FDD478E926C9BF97900F7A36ABE8BF48E17A14AE47C9BF1FF46C567DAEE8BF9CC420B07268C9BFC5FEB27BF2B0E8BFF0A7C64B3789C9BF4E62105839B4E8BF448B6CE7FBA9C9BFD6C56D3480B7E8BF0F0BB5A679C7C9BF5F29CB10C7BAE8BF63EE5A423EE8C9BFE78C28ED0DBEE8BFB7D100DE0209CABF6FF085C954C1E8BF8351499D8026CABFDAACFA5C6DC5E8BF4ED1915CFE43CABF62105839B4C8E8BFA2B437F8C264CABFCDCCCCCCCCCCE8BF6E3480B74082CABF37894160E5D0E8BF39B4C876BE9FCABFA245B6F3FDD4E8BF053411363CBDCABFEE5A423EE8D9E8BFD0B359F5B9DACABF5917B7D100DEE8BF9C33A2B437F8CABFA52C431CEBE2E8BF68B3EA73B515CBBFF241CF66D5E7E8BFABCFD556EC2FCBBF3F575BB1BFECE8BF764F1E166A4DCBBF8B6CE7FBA9F1E8BFBA6B09F9A067CBBFD881734694F6E8BFFD87F4DBD781CBBF2497FF907EFBE8BFC8073D9B559FCBBF5305A3923A01E9BF0B24287E8CB9CBBFA01A2FDD2406E9BF4F401361C3D3CBBFCE88D2DEE00BE9BF09F9A067B3EACBBFFDF675E09C11E9BF4D158C4AEA04CCBF2C6519E25817E9BF9031772D211FCCBF5BD3BCE3141DE9BF4BEA04341136CCBF6B9A779CA223E9BF8E06F0164850CCBF9A081B9E5E29E9BF48BF7D1D3867CCBFABCFD556EC2FE9BF03780B24287ECCBFBC96900F7A36E9BFBE30992A1895CCBFEA043411363CE9BF79E9263108ACCCBFFBCBEEC9C342E9BFAB3E575BB1BFCCBF0C93A9825149E9BF66F7E461A1D6CCBFFFB27BF2B050E9BF984C158C4AEACCBF107A36AB3E57E9BFCBA145B6F3FDCCBF2041F163CC5DE9BFFDF675E09C11CDBF1361C3D32B65E9BF304CA60A4625CDBF24287E8CB96BE9BF62A1D634EF38CDBF174850FC1873E9BF94F6065F984CCDBF0A68226C787AE9BF3EE8D9ACFA5CCDBFFD87F4DBD781E9BF713D0AD7A370CDBFF0A7C64B3789E9BF1B2FDD240681CDBFE3C798BB9690E9BFC520B0726891CDBFD5E76A2BF697E9BF6F1283C0CAA1CDBFAA60545227A0E9BF90A0F831E6AECDBF9D8026C286A7E9BF3A92CB7F48BFCDBF90A0F831E6AEE9BF5C2041F163CCCDBF6519E25817B7E9BF7DAEB6627FD9CDBF3A92CB7F48BFE9BF9F3C2CD49AE6CDBF2DB29DEFA7C6E9BFC1CAA145B6F3CDBF022B8716D9CEE9BFE25817B7D100CEBFD7A3703D0AD7E9BF7B832F4CA60ACEBFAC1C5A643BDFE9BF9D11A5BDC117CEBF8195438B6CE7E9BF363CBD529621CEBF560E2DB29DEFE9BFCF66D5E76A2BCEBF2B8716D9CEF7E9BF6891ED7C3F35CEBF000000000000EABF7958A835CD3BCEBFD578E9263108EABF1283C0CAA145CEBFAAF1D24D6210EABF234A7B832F4CCEBF7F6ABC749318EABF3411363CBD52CEBF363CBD529621EABF45D8F0F44A59CEBF0BB5A679C729EABF569FABADD85FCEBFE02D90A0F831EABFDE02098A1F63CEBFB5A679C7293AEABFEFC9C342AD69CEBF6C787AA52C43EABF772D211FF46CCEBF41F163CC5D4BEABF00917EFB3A70CEBFF8C264AA6054EABF88F4DBD78173CEBFCD3B4ED1915CEABF88F4DBD78173CEBF840D4FAF9465EABF105839B4C876CEBF598638D6C56DEABF105839B4C876CEBF105839B4C876EABF105839B4C876CEBFE5D022DBF97EEABF105839B4C876CEBFBA490C022B87EABF105839B4C876CEBF711B0DE02D90EABF88F4DBD78173CEBF4694F6065F98EABF88F4DBD78173CEBFFE65F7E461A1EABF00917EFB3A70CEBFD3DEE00B93A9EABF772D211FF46CCEBF8AB0E1E995B2EABFEFC9C342AD69CEBF5F29CB10C7BAEABFDE02098A1F63CEBF16FBCBEEC9C3EABF569FABADD85FCEBFEB73B515FBCBEABF45D8F0F44A59CEBFC0EC9E3C2CD4EABF3411363CBD52CEBF956588635DDCEABF234A7B832F4CCEBF4C37894160E5EABF1283C0CAA145CEBF21B0726891EDEABF7958A835CD3BCEBFF6285C8FC2F5EABF6891ED7C3F35CEBFCBA145B6F3FDEABFCF66D5E76A2BCEBFA01A2FDD2406EBBF363CBD529621CEBF75931804560EEBBF9D11A5BDC117CEBF4A0C022B8716EBBF7B832F4CA60ACEBF1F85EB51B81EEBBFE25817B7D100CEBFF4FDD478E926EBBFC1CAA145B6F3CDBFC976BE9F1A2FEBBF9F3C2CD49AE6CDBF9EEFA7C64B37EBBF7DAEB6627FD9CDBF910F7A36AB3EEBBF5C2041F163CCCDBF6688635DDC46EBBF3A92CB7F48BFCDBF3B014D840D4FEBBF90A0F831E6AECDBF2D211FF46C56EBBF6F1283C0CAA1CDBF2041F163CC5DEBBFC520B0726891CDBFF5B9DA8AFD65EBBF1B2FDD240681CDBFE8D9ACFA5C6DEBBF713D0AD7A370CDBFDBF97E6ABC74EBBF3EE8D9ACFA5CCDBFCE1951DA1B7CEBBF94F6065F984CCDBFC139234A7B83EBBF62A1D634EF38CDBFB459F5B9DA8AEBBF304CA60A4625CDBFA779C7293A92EBBFFDF675E09C11CDBFB84082E2C798EBBFCBA145B6F3FDCCBFAA60545227A0EBBF984C158C4AEACCBFBB270F0BB5A6EBBF66F7E461A1D6CCBFCCEEC9C342ADEBBFAB3E575BB1BFCCBFBF0E9C33A2B4EBBF79E9263108ACCCBFD0D556EC2FBBEBBFBE30992A1895CCBFE09C11A5BDC1EBBF03780B24287ECCBF0F0BB5A679C7EBBF48BF7D1D3867CCBF20D26F5F07CEEBBF8E06F0164850CCBF31992A1895D4EBBF4BEA04341136CCBF5F07CE1951DAEBBF9031772D211FCCBF70CE88D2DEE0EBBF4D158C4AEA04CCBF9F3C2CD49AE6EBBF09F9A067B3EACBBFCEAACFD556ECEBBF4F401361C3D3CBBFFC1873D712F2EBBF0B24287E8CB9CBBF2B8716D9CEF7EBBFC8073D9B559FCBBF789CA223B9FCEBBFFD87F4DBD781CBBFA60A46257502ECBFBA6B09F9A067CBBFF31FD26F5F07ECBF764F1E166A4DCBBF3F355EBA490CECBFABCFD556EC2FCBBF8C4AEA043411ECBF68B3EA73B515CBBFD95F764F1E16ECBF9C33A2B437F8CABF2575029A081BECBFD0B359F5B9DACABF728A8EE4F21FECBF053411363CBDCABFDC4603780B24ECBF39B4C876BE9FCABF295C8FC2F528ECBF6E3480B74082CABF931804560E2DECBFA2B437F8C264CABFFED478E92631ECBF4ED1915CFE43CABF6891ED7C3F35ECBF8351499D8026CABFF1F44A598638ECBFB7D100DE0209CABF5BB1BFEC9E3CECBF63EE5A423EE8C9BFE4141DC9E53FECBF0F0BB5A679C7C9BF6C787AA52C43ECBF448B6CE7FBA9C9BFF5DBD7817346ECBFF0A7C64B3789C9BF7D3F355EBA49ECBF9CC420B07268C9BF05A3923A014DECBF48E17A14AE47C9BFACADD85F764FECBFF4FDD478E926C9BF3411363CBD52ECBFA01A2FDD2406C9BFDA1B7C613255ECBF4C37894160E5C8BF8126C286A757ECBFF853E3A59BC4C8BF273108AC1C5AECBFA4703D0AD7A3C8BFEBE2361AC05BECBF508D976E1283C8BF91ED7C3F355EECBFFCA9F1D24D62C8BF569FABADD85FECBF2063EE5A423EC8BF1A51DA1B7C61ECBFCC7F48BF7D1DC8BFDE02098A1F63ECBF789CA223B9FCC7BFA2B437F8C264ECBF24B9FC87F4DBC7BF840D4FAF9465ECBF4772F90FE9B7C7BF48BF7D1D3867ECBFF38E53742497C7BF2B1895D40968ECBF174850FC1873C7BF0D71AC8BDB68ECBFC364AA605452C7BFEFC9C342AD69ECBFE71DA7E8482EC7BFEFC9C342AD69ECBF933A014D840DC7BFD122DBF97E6AECBFB6F3FDD478E9C6BFD122DBF97E6AECBF62105839B4C8C6BFD122DBF97E6AECBF0E2DB29DEFA7C6BFD122DBF97E6AECBF32E6AE25E483C6BFD122DBF97E6AECBFDE02098A1F63C6BFEFC9C342AD69ECBF02BC0512143FC6BFEFC9C342AD69ECBFAED85F764F1EC6BF0D71AC8BDB68ECBFD1915CFE43FAC5BF2B1895D40968ECBF7DAEB6627FD9C5BF48BF7D1D3867ECBFA167B3EA73B5C5BF840D4FAF9465ECBF4D840D4FAF94C5BFA2B437F8C264ECBFF9A067B3EA73C5BFDE02098A1F63ECBFA5BDC1172653C5BF1A51DA1B7C61ECBFC976BE9F1A2FC5BF569FABADD85FECBF75931804560EC5BF91ED7C3F355EECBF21B0726891EDC4BFEBE2361AC05BECBFCDCCCCCCCCCCC4BF273108AC1C5AECBF79E9263108ACC4BF8126C286A757ECBF25068195438BC4BFDA1B7C613255ECBFD122DBF97E6AC4BF3411363CBD52ECBF7D3F355EBA49C4BFACADD85F764FECBF295C8FC2F528C4BF05A3923A014DECBFD578E9263108C4BF7D3F355EBA49ECBF8195438B6CE7C3BFF5DBD7817346ECBFB515FBCBEEC9C3BF6C787AA52C43ECBF613255302AA9C3BFE4141DC9E53FECBF0E4FAF946588C3BF5BB1BFEC9E3CECBF42CF66D5E76AC3BFF1F44A598638ECBF764F1E166A4DC3BF6891ED7C3F35ECBF226C787AA52CC3BFFED478E92631ECBF57EC2FBB270FC3BF931804560E2DECBF8B6CE7FBA9F1C2BF295C8FC2F528ECBFC0EC9E3C2CD4C2BFDC4603780B24ECBFF46C567DAEB6C2BF728A8EE4F21FECBF29ED0DBE3099C2BF2575029A081BECBF5D6DC5FEB27BC2BFD95F764F1E16ECBF1A51DA1B7C61C2BF8C4AEA043411ECBF4ED1915CFE43C2BF3F355EBA490CECBF0BB5A679C729C2BFF31FD26F5F07ECBFC898BB96900FC2BFA60A46257502ECBFFC1873D712F2C1BF789CA223B9FCEBBFB9FC87F4DBD7C1BF2B8716D9CEF7EBBF76E09C11A5BDC1BFFC1873D712F2EBBFBB270F0BB5A6C1BFCEAACFD556ECEBBF780B24287E8CC1BF9F3C2CD49AE6EBBF35EF38454772C1BF70CE88D2DEE0EBBF7A36AB3E575BC1BF5F07CE1951DAEBBF371AC05B2041C1BF31992A1895D4EBBF7C613255302AC1BF20D26F5F07CEEBBFC1A8A44E4013C1BF0F0BB5A679C7EBBF07F0164850FCC0BFE09C11A5BDC1EBBF4C37894160E5C0BFD0D556EC2FBBEBBF19E25817B7D1C0BFBF0E9C33A2B4EBBF5F29CB10C7BAC0BFCCEEC9C342ADEBBF2CD49AE61DA7C0BFBB270F0BB5A6EBBFFA7E6ABC7493C0BFAA60545227A0EBBFC7293A92CB7FC0BFB84082E2C798EBBF95D40968226CC0BFA779C7293A92EBBF637FD93D7958C0BFB459F5B9DA8AEBBF302AA913D044C0BFC139234A7B83EBBF8638D6C56D34C0BFCE1951DA1B7CEBBF54E3A59BC420C0BFDBF97E6ABC74EBBFAAF1D24D6210C0BFE8D9ACFA5C6DEBBF000000000000C0BFF5B9DA8AFD65EBBFAC1C5A643BDFBFBF2041F163CC5DEBBF69006F8104C5BFBF2D211FF46C56EBBF151DC9E53FA4BFBF3B014D840D4FEBBFD200DE02098ABFBF6688635DDC46EBBF8FE4F21FD26FBFBF910F7A36AB3EEBBF4BC8073D9B55BFBF9EEFA7C64B37EBBF08AC1C5A643BBFBFC976BE9F1A2FEBBFC58F31772D21BFBFF4FDD478E926EBBF933A014D840DBFBF1F85EB51B81EEBBF4F1E166A4DF3BEBF4A0C022B8716EBBF1DC9E53FA4DFBEBF75931804560EEBBFEB73B515FBCBBEBFA01A2FDD2406EBBFB81E85EB51B8BEBFCBA145B6F3FDEABF97900F7A36ABBEBFF6285C8FC2F5EABF643BDF4F8D97BEBF21B0726891EDEABF43AD69DE718ABEBF4C37894160E5EABF211FF46C567DBEBF956588635DDCEABF00917EFB3A70BEBFC0EC9E3C2CD4EABFDE02098A1F63BEBFEB73B515FBCBEABFCD3B4ED1915CBEBF16FBCBEEC9C3EABFACADD85F764FBEBF5F29CB10C7BAEABF9BE61DA7E848BEBF8AB0E1E995B2EABF8A1F63EE5A42BEBFD3DEE00B93A9EABF7958A835CD3BBEBFFE65F7E461A1EABF7958A835CD3BBEBF4694F6065F98EABF6891ED7C3F35BEBF711B0DE02D90EABF6891ED7C3F35BEBFBA490C022B87EABF6891ED7C3F35BEBFE5D022DBF97EEABF");
    geom1_ = GEOSGeomFromHEX_buf(reinterpret_cast<const unsigned char*>(wkb.c_str()), wkb.size());

    geom2_ = GEOSBuffer(geom1_, 0.05, 10);

    ensure(geom2_ != nullptr);
}

} // namespace tut
